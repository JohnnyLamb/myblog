<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Automatic memory bootstrapping for Omo</title>
  <link rel="icon" type="image/svg+xml" href="/assets/si.svg" />
  <meta name="description" content="Ensuring memory files exist and loading the latest non-empty log to preserve context across sessions." />
  <link rel="alternate" type="application/rss+xml" title="J.A. Lamb" href="/rss.xml" />
  <script>
    (() => {
      const storageKey = 'theme';
      const storage = (() => {
        try {
          localStorage.setItem('__t', '1');
          localStorage.removeItem('__t');
          return localStorage;
        } catch (err) {
          try {
            sessionStorage.setItem('__t', '1');
            sessionStorage.removeItem('__t');
            return sessionStorage;
          } catch (innerErr) {
            return null;
          }
        }
      })();

      const stored = storage ? storage.getItem(storageKey) : null;
      if (stored === 'dark' || stored === 'light') {
        document.documentElement.setAttribute('data-theme', stored);
        return;
      }
      // Default to dark mode
      document.documentElement.setAttribute('data-theme', 'dark');
    })();
  </script>
  <link rel="stylesheet" href="/assets/styles.css" />
</head>

<body>
  <header class="site-header">
    <a class="site-title" href="/">J.A. Lamb</a>
    <nav class="site-nav">
      <a href="/">Home</a>
      <a href="/about/">About</a>
    </nav>
    <button class="theme-toggle" type="button" id="theme-toggle" aria-pressed="false">Dark</button>
  </header>

  <main class="site-main">
    <section class="post">
  <header class="post-header">
    <h1>Automatic memory bootstrapping for Omo</h1>
    <p class="post-meta">Feb 03, 2026</p>
  </header>
  <p>The goal was simple: <strong>continuity without friction</strong>. I didn’t want to babysit memory files or remember to load the right ones every session. So we taught Omo to handle it automatically.</p>
<h2>The problem</h2>
<p>Omo’s system prompt depends on a consistent set of memory files:</p>
<ul>
<li>daily logs in <code>memory/YYYY-MM-DD.md</code></li>
<li>long‑term memory in <code>MEMORY.md</code></li>
</ul>
<p>When those files are missing (new workspace, fresh clone, new day), context breaks and continuity suffers.</p>
<h2>The fix</h2>
<p>We implemented automatic bootstrapping and smarter loading in <code>src/agent.ts</code>:</p>
<ul>
<li>Ensure <code>memory/</code> exists</li>
<li>Create <strong>today</strong> and <strong>yesterday</strong> daily logs if missing</li>
<li>Create <code>MEMORY.md</code> if missing</li>
<li>Load the <strong>most recent non‑empty</strong> daily log into the system prompt</li>
<li>Always include <code>MEMORY.md</code> for long‑term continuity</li>
</ul>
<p>The result: Omo wakes up with context every time, without manual setup.</p>
<h2>Why “most recent non‑empty” matters</h2>
<p>Daily logs can be empty templates. Loading the newest file by date isn’t enough. We instead sort by modification time and skip small template‑only files, ensuring we bring in real context.</p>
<h2>Outcome</h2>
<p>This change makes Omo feel <em>continuous</em>—even across cold starts—and removes a fragile, manual step from the workflow.</p>
<p>If you want the exact logic, check <code>ensureMemoryFiles()</code> and <code>loadSystemPrompt()</code> in <code>src/agent.ts</code>.</p>

</section>

  </main>

  <footer class="site-footer">
    <span>2026 J.A. Lamb</span>
    <div class="site-footer-links">
      <a href="mailto:jackeedraper@gmail.com">jackeedraper@gmail.com</a>
      <a href="https://github.com/JohnnyLamb">GitHub</a>
    </div>
  </footer>
  <script src="/assets/theme.js"></script>
</body>

</html>
